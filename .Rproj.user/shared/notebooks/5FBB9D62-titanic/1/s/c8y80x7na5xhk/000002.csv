"0","library(tidyverse)"
"0","library(tidymodels)"
"0","library(scales)"
"0","library(skimr)"
"0","library(kableExtra)"
"0","library(themis)"
"0",""
"0","# colours"
"0","pal_sliced <- c(viridisLite::magma(8)[2:8], ""#4C4C53"", ""#9B9BA8"")"
"0",""
"0","title_colour <- pal_sliced[2]"
"0","table_colour <- pal_sliced[2]"
"0","bar_colour <- pal_sliced[2]"
"0","grid_colour <- pal_sliced[9]"
"0",""
"0","theme_set(theme_bw() %+replace%"
"0","    theme("
"0","      # align title and caption to the plot not the panel"
"0","      plot.title.position = 'plot',"
"0","      plot.caption.position = 'plot',"
"0","      # change the title and caption to markdown and move them futher from the plot"
"0","      plot.title = element_text("
"0","        size = rel(1.3),"
"0","        hjust = 0, "
"0","        margin = margin(c(0, 0, 10, 0)),"
"0","        colour = title_colour"
"0","      ),"
"0","      plot.subtitle = element_text("
"0","        size = rel(1.15),"
"0","        hjust = 0, "
"0","        margin = margin(c(0, 0, 15, 0))"
"0","      ),"
"0","      plot.caption = element_text("
"0","        hjust = 1, "
"0","        margin = margin(c(10, 0, 0, 0))"
"0","      ),"
"0","      # move axis titles to the left/top and change them to markdown"
"0","      axis.title = element_text(hjust = 1),"
"0","      # allow the axis values to the markdown as well"
"0","      axis.text = element_text(),"
"0","      # remove the panel border"
"0","      panel.border = element_blank(),"
"0","      # put in the axis lines with a slightly thicker line than the gridlines"
"0","      axis.line = element_line(colour = grid_colour, size = rel(1.5)),"
"0","      # make the tickmarks the same colour"
"0","      axis.ticks = element_line(colour = grid_colour),"
"0","      # facet strip text left aligned with extra space above"
"0","      strip.text = element_text("
"0","        hjust = 0, margin = margin(c(10, 0, 0, 0)), colour = title_colour"
"0","      ),"
"0","      # clear colour and fill for strip"
"0","      strip.background = element_rect(colour = NA, fill = NA),"
"0","      # dotted gridlines"
"0","      panel.grid = element_line(linetype = 'dotted'),"
"0","      # ability to use a different colour for the gridlines"
"0","      panel.grid.major.x = element_line(colour = grid_colour),"
"0","      panel.grid.major.y = element_line(colour = grid_colour),"
"0","      panel.grid.minor.x = element_blank(),"
"0","      panel.grid.minor.y = element_blank(),"
"0","    )"
"0",")"
"0",""
"0","scale_y_pct <- function("
"0","  accuracy = 1L, "
"0","  breaks = pretty_breaks(),"
"0","  expand = expansion(mult = c(0, .05)),"
"0","  ..."
"0",") {"
"0","  scale_y_continuous("
"0","    labels = scales::percent_format(accuracy = accuracy, big.mark = "",""),"
"0","    breaks = breaks,"
"0","    expand = expand,"
"0","    ..."
"0","  )"
"0","}"
"0",""
"0","scale_y_comma <- function("
"0","  accuracy = 1L, "
"0","  breaks = pretty_breaks(),"
"0","  expand = expansion(mult = c(0, .05)),"
"0","  ..."
"0",") {"
"0","  scale_y_continuous("
"0","    labels = scales::comma_format(accuracy = accuracy),"
"0","    breaks = breaks,"
"0","    expand = expand,"
"0","    ..."
"0","  )"
"0","}"
"0",""
"0","scale_fill_jo <- function(...) {"
"0","  scale_fill_manual(values = pal_sliced, ...)"
"0","}"
"0",""
"0","scale_fill_discrete <- scale_fill_jo"
"0",""
"0","update_geom_defaults(""bar"", list(fill = bar_colour))"
"0","update_geom_defaults(""col"", list(fill = bar_colour))"
"0","update_geom_defaults(""point"", list(colour = bar_colour))"
"0","update_geom_defaults(""line"", list(colour = bar_colour))"
