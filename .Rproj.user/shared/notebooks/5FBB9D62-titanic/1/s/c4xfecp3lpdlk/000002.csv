"0","xgboost_recipe <- recipe(survived ~ ., data = train) %>%"
"0","  # id"
"0","  update_role(passenger_id, new_role = 'id') %>% "
"0","  # rebalance"
"0","  step_upsample(survived) %>% "
"0","  step_mutate("
"0","    # ticket contains alpha"
"0","    ticket = as.numeric(str_detect(ticket, '[A-Za-z]')),"
"0","    # cabin prefix and na"
"0","    cabin = replace_na(str_sub(cabin, 1, 1), 'Z'),"
"0","    # missing embarked"
"0","    embarked = replace_na(embarked, 'S'),"
"0","    # zero fare"
"0","    zero_fare = as.numeric(fare == 0),"
"0","    # get title"
"0","    title = str_sub(name, str_locate(name, ',')[,1] + 2, "
"0","      str_locate(name, '\\.')[,1] - 1),"
"0",""
"0","  ) %>% "
"0","  # strings to factors"
"0","  step_string2factor(all_nominal_predictors()) %>% "
"0","  # reduce the number of groups for title"
"0","  step_other(title, threshold = 0.02) %>% "
"0","  # fare to log"
"0","  step_log(fare, offset = 0.1) %>% "
"0","  # remove unneeded"
"0","  step_rm(name) %>%"
"0","  # imputation"
"0","  step_impute_knn(age) %>%"
"0","  # handle new categories"
"0","  step_novel(all_nominal(), -all_outcomes()) %>%"
"0","  # factors"
"0","  step_dummy(all_nominal_predictors()) %>% "
"0","  # zero variance"
"0","  step_zv(all_predictors())"
